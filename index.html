<!DOCTYPE html>

<html lang="pt-BR"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Loja de Materiais</title>
<style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #f5f5f5; }
    header { background: #556B2F; padding: 10px 20px; color: white; display: flex; align-items: center; justify-content: center; flex-direction: column; }
    header img.logo { height: 100px; margin-bottom: 10px; }
    header h1 { margin: 0; font-size: 28px; text-align: center; }
    nav { background: #6B8E23; padding: 10px; text-align: center; }
    nav a { color: white; margin: 0 15px; text-decoration: none; font-weight: bold; cursor: pointer; }
    .search-bar { padding: 20px; text-align: center; }
    .search-bar input { width: 50%; padding: 10px; font-size: 16px; }
    .filters { text-align: center; margin-bottom: 20px; }
    .filters select { padding: 10px; font-size: 16px; margin: 0 10px; }
    .products-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
      padding: 20px;
    }
    .product-card {
      background: white;
      padding: 15px;
      border: 1px solid #ddd;
      border-radius: 8px;
      text-align: center;
      width: 220px;
    }
    .product-card img { width: 100%; height: 150px; object-fit: contain; }
    .product-card h3 { font-size: 16px; margin: 10px 0 5px; }
    .product-card p { color: #006400; font-weight: bold; }
    .product-card input[type="number"] {
      width: 60px;
      padding: 5px;
      margin-top: 10px;
    }
    .product-card button {
      margin-top: 10px;
      padding: 8px 12px;
      background: #6B8E23;
      color: white;
      border: none;
      cursor: pointer;
      border-radius: 4px;
    }
    .cart { padding: 20px; }
    .cart ul { list-style-type: none; padding: 0; }
    .cart li { margin-bottom: 10px; }
    footer {
      background: #6B8E23;
      color: white;
      text-align: center;
      padding: 20px;
      margin-top: 30px;
    }
    .section { display: none; padding: 20px; }
    .section.active { display: block; }
  
    .tooltip {
        position: relative;
        display: inline-block;
    }
    .tooltip .tooltip-img {
        visibility: hidden;
        width: 200px;
        background-color: white;
        border: 1px solid #ccc;
        padding: 5px;
        border-radius: 5px;
        position: absolute;
        z-index: 10;
        top: -10px;
        left: 110%;
    }
    .tooltip:hover .tooltip-img {
        visibility: visible;
    }
    </style>
<script src="https://cdn.sheetjs.com/xlsx-latest/package/dist/xlsx.full.min.js"></script>
<script src="https://cdn.sheetjs.com/xlsx-latest/package/dist/xlsx.full.min.js"></script></head>
<body>
<header>
<img alt="Logo da Loja" class="logo" src="logo.png"/>
<h1>Elementos Materiais</h1>
</header>
<nav>
<a onclick="showSection('produtos')">Produtos</a>
<a onclick="showSection('ofertas')">Ofertas</a>
<a onclick="showSection('carrinho')">Carrinho</a>
</nav>
<div class="search-bar">
<input id="search" onkeyup="searchProducts()" placeholder="Buscar produtos..." type="text"/>
</div>
<div class="filters">
<label>Ordenar por:
      <select onchange="sortProducts(this.value)">
<option value="nome">Nome (A-Z)</option>
<option value="menor">Menor Valor</option>
<option value="maior">Maior Valor</option>
</select>
</label>
</div>
<button id="admin-btn" style="position: fixed; top: 10px; right: 10px; padding: 10px;">Admin</button>
<div id="admin-login" style="display: none; position: fixed; top: 20%; left: 50%; transform: translateX(-50%); background: white; padding: 20px; border: 1px solid rgb(204, 204, 204);">
<p>Senha de Administrador:</p>
<input id="admin-pass" type="password"/>
<button id="entrar-admin">Entrar</button>
</div>
<div id="admin-panel" style="display: none; padding: 20px; background: rgb(255, 255, 255); position: fixed; top: 10%; left: 50%; transform: translateX(-50%); border: 1px solid rgb(204, 204, 204); max-width: 500px; z-index: 1000;">
<h3>Painel Admin</h3>
<h4>Adicionar Produto</h4>
<input id="nome-prod" placeholder="Nome" type="text"/><br/>
<input id="valor-prod" placeholder="Valor" type="number"/><br/>
<input id="img-prod" placeholder="URL da Imagem" type="text"/><br/>
<select id="menu-prod">
<option value="produtos">Produtos</option>
<option value="ofertas">Ofertas</option>
</select><br/>
<button onclick="adicionarProduto()">Adicionar Produto</button>
<h4>Remover Produto</h4>
<input id="nome-remover" placeholder="Nome do Produto" type="text"/>
<button onclick="removerProduto()">Remover</button>
<h4>Adicionar em Massa</h4>
<input accept=".xlsx" id="excel-upload" type="file"/>
<button onclick="carregarPlanilha()">Enviar Planilha</button>
<h4>Exportar</h4>
<button onclick="baixarHTML()">Salvar HTML Modificado</button>
<button onclick="fecharPainel()">Fechar</button>
<button onclick="removerTodosProdutos()">Remover Todos os Produtos</button>
<h4>Alterar Logo</h4>
<input id="nova-logo" placeholder="URL da nova logo" type="text"/><br/>
<button onclick="trocarLogo()">Atualizar Logo</button>
</div>
<section class="section products-grid active" id="produtos"></section>
<section class="section products-grid" id="ofertas"></section>
<section class="section cart" id="carrinho">
<h2>Seu Carrinho</h2>
<textarea id="obs-cliente" placeholder="Observações adicionais..." rows="4" style="width:100%; margin-top:10px;"></textarea>
<table id="cart-list">
<thead>
<tr>
<th>Imagem</th>
<th>Produto</th>
<th>Valor Unitário</th>
<th>Quantidade</th>
<th>Subtotal</th>
<th>Ações</th>
</tr>
</thead>
<tbody></tbody>
</table>
<p id="cart-total" style="font-weight: bold; margin-top: 10px;">Total: R$ 0.00</p>
<button class="botao" onclick="enviarPedido()">Enviar pedido para WhatsApp</button>
<p><em>Você pode solicitar o pagamento por <strong>PIX</strong>, receber um <strong>link de pagamento</strong> ou negociar pelo WhatsApp.</em></p>
</section>
<script>
function trocarLogo() {
  const novaLogo = document.getElementById("nova-logo").value;
  if (novaLogo.trim()) {
    document.querySelector("img.logo").src = novaLogo.trim();
    localStorage.setItem("logoSrc", novaLogo.trim());
  }
}

window.onload = function() {
  carregarProdutosSalvos();
  updateCart();

  // Restaurar logo salva
  const logoSalva = localStorage.getItem("logoSrc");
  if (logoSalva) {
    document.querySelector("img.logo").src = logoSalva;
  }

  document.querySelectorAll('nav a').forEach(link => {
    link.addEventListener("click", () => {
      const id = link.getAttribute("onclick").match(/'([^']+)'/)[1];
      document.querySelectorAll('.section').forEach(sec => sec.classList.remove('active'));
      document.getElementById(id).classList.add('active');
    });
  });

  document.getElementById("admin-btn").addEventListener("click", () => {
    document.getElementById("admin-login").style.display = "block";
  });

  document.getElementById("entrar-admin").addEventListener("click", () => {
    const senha = document.getElementById("admin-pass").value;
    if (senha === "Elementos2025") {
      document.getElementById("admin-login").style.display = "none";
      const painel = document.getElementById("admin-panel");
      painel.style.display = "block";
      painel.style.zIndex = "1000";
    } else {
      alert("Senha incorreta!");
    }
  });
}
</script><script>
function removerTodosProdutos() {
  if (confirm("Tem certeza que deseja remover TODOS os produtos?")) {
    localStorage.removeItem('produtosSalvos');
    produtosSalvos = [];
    document.getElementById("produtos").innerHTML = '';
    document.getElementById("ofertas").innerHTML = '';
    alert("Todos os produtos foram removidos!");
  }
}
</script><script>
function baixarHTML() {
  const loginPanel = document.getElementById("admin-login");
  const adminPanel = document.getElementById("admin-panel");

  const originalLoginDisplay = loginPanel.style.display;
  const originalAdminDisplay = adminPanel.style.display;

  loginPanel.style.display = "none";
  adminPanel.style.display = "none";

  setTimeout(() => {
    const docClone = document.documentElement.cloneNode(true);
    const doctype = "<!DOCTYPE html>";
    const htmlString = doctype + "\n" + docClone.outerHTML;
    const blob = new Blob([htmlString], { type: "text/html" });
    const link = document.createElement("a");
    link.href = URL.createObjectURL(blob);
    link.download = "loja_modificada.html";
    link.click();

    loginPanel.style.display = originalLoginDisplay;
    adminPanel.style.display = originalAdminDisplay;
  }, 100);
}
</script>
</body></html>
